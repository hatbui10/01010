<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Vòng quay kỷ luật</title>
<style>
    body {
        margin: 0;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #ffa726, #ff7043);
        font-family: Arial, sans-serif;
    }

    h2 {
        color: #fff;
        margin-bottom: 15px;
        text-align: center;
    }

    .wheel-wrapper {
        position: relative;
        width: 320px;
        height: 320px;
    }

    canvas {
        border-radius: 50%;
        background: #fff;
    }

.pointer {
    bottom: -6px;
    top: auto;
    left: 50%;
    transform: translateX(-50%);
    border-top: 22px solid #000;
    border-bottom: none;
}

    button {
        margin-top: 20px;
        padding: 10px 28px;
        font-size: 16px;
        border-radius: 20px;
        border: none;
        background: #ff5722;
        color: #fff;
        cursor: pointer;
    }

    button:active {
        transform: scale(0.97);
    }

    #result {
        margin-top: 15px;
        color: #fff;
        font-size: 18px;
        font-weight: bold;
    }
</style>
</head>
<body>

<h2>Nghiêm túc giữ kỷ luật thì sẽ tiến bộ</h2>

<div class="wheel-wrapper">
    <div class="pointer"></div>
    <canvas id="wheel" width="320" height="320"></canvas>
</div>

<button onclick="spin()">Spin</button>
<div id="result"></div>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const radius = canvas.width / 2;

const items = [
    "0-1-1-0",
    "1-0-1-1",
    "Bỏ qua",
    "1-1-0-1",
    "1-0-1-0",
    "0-0-1-0",
    "Bỏ qua",
    "1-1-1-0",
    "0-1-0-0",
    "1-0-0-0",
    "1-0-1-1",
    "0-1-1-1"
];

const colors = [
    "#42a5f5", "#ec407a", "#ff7043", "#66bb6a",
    "#ffa726", "#ab47bc", "#ff7043", "#26a69a",
    "#ffee58", "#8d6e63", "#29b6f6", "#ef5350"
];

let angle = 0;
let spinning = false;

function drawWheel() {
    const arc = 2 * Math.PI / items.length;
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (let i = 0; i < items.length; i++) {
        const start = angle + i * arc;

        ctx.beginPath();
        ctx.moveTo(radius, radius);
        ctx.arc(radius, radius, radius, start, start + arc);
        ctx.fillStyle = colors[i];
        ctx.fill();

        ctx.save();
        ctx.translate(radius, radius);
        ctx.rotate(start + arc / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#000";
        ctx.font = "14px Arial";
        ctx.fillText(items[i], radius - 10, 5);
        ctx.restore();
    }
}

function spin() {
    if (spinning) return;
    spinning = true;

    const duration = 3000; // 3 giây
    const start = performance.now();
    const startAngle = angle;
    const extraRounds = 5; // số vòng quay thêm

    function animate(now) {
        const elapsed = now - start;
        const progress = Math.min(elapsed / duration, 1);

        // easing cho mượt
        const easeOut = 1 - Math.pow(1 - progress, 3);

        angle = startAngle + easeOut * extraRounds * 2 * Math.PI;
        drawWheel();

        if (progress < 1) {
            requestAnimationFrame(animate);
        } else {
            spinning = false;
            showResult();
        }
    }

    requestAnimationFrame(animate);
}
function showResult() {
    const arc = 2 * Math.PI / items.length;
    const index =
        Math.floor(items.length - (angle % (2 * Math.PI)) / arc) % items.length;

    document.getElementById("result").innerText =
        "Kết quả: " + items[index];
}

drawWheel();
</script>

</body>
</html>

