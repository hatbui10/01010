<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Vòng quay kỷ luật</title>

<style>
body {
    margin: 30px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    
    font-family: Arial, sans-serif;
}

h2 {
    color: #fff;
    margin-bottom: 15px;
    text-align: center;
}

.wheel-wrapper {
    position: relative;
    width: 320px;
    height: 320px;
}

canvas {
    border-radius: 50%;
    background: #fff;
    box-shadow: inset 0 0 8px rgba(0,0,0,0.15);
}

/* MŨI TÊN CHỈ XUỐNG */
.pointer {
    position: absolute;
    top: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    border-top: 22px solid #000;
    filter: drop-shadow(0 2px 2px rgba(0,0,0,0.4));
}

button {
    margin-top: 20px;
    padding: 10px 28px;
    font-size: 16px;
    border-radius: 20px;
    border: none;
    background: 2845D6;
    color: #fff;
    cursor: pointer;
}

button:active {
    transform: scale(0.97);
}

#result {
    margin-top: 15px;
    color: #fff;
    font-size: 18px;
    font-weight: bold;
}

.wheel-frame::before {
    content: "";
    position: absolute;
    inset: -6px;
    border-radius: 50%;
    background: conic-gradient(
        from 0deg,
        #ff9800,
        #ffc107,
        #ff9800
    );
    filter: blur(8px);
    opacity: 0.6;
    z-index: -1;
}
.wheel-frame {
    position: relative;
}

.app-box {
    padding: 28px 26px 32px;
    border-radius: 28px;
    background: red;
    box-shadow:
        0 18px 40px rgba(0,0,0,0.35),
        inset 0 4px 10px rgba(255,255,255,0.8);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 18px;
}


</style>
</head>

<body>

<div class="app-box">
    <h2>Nghiêm túc giữ kỷ luật thì sẽ tiến bộ</h2>
<div id="result"></div>
    <div class="wheel-frame">
        <div class="wheel-wrapper">
            <div class="pointer"></div>
            <canvas id="wheel" width="320" height="320"></canvas>
        </div>
    </div>

    <button onclick="spin()">Spin</button>
    
</div>


<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const radius = canvas.width / 2;

const items = [
    
    "0-0-1-0",
    "1-1-0-1",
    "1-0-1-0",
    "0-1-1-0",
    "1-0-0-1",
     "0-1-0-1",
];

const colors = [
    "#1E88E5", // xanh dương
    "#D81B60", // hồng đậm
    "#FB8C00", // cam
    "#43A047", // xanh lá
    "#8E24AA", // tím
    "#F4511E", // cam đỏ
   
  
];

let angle = 0;
let spinning = false;

function drawWheel() {
    const arc = 2 * Math.PI / items.length;
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (let i = 0; i < items.length; i++) {
        const start = angle + i * arc;

        ctx.beginPath();
        ctx.moveTo(radius, radius);
        ctx.arc(radius, radius, radius, start, start + arc);
        ctx.fillStyle = colors[i];
        ctx.fill();

        ctx.save();
        ctx.translate(radius, radius);
        ctx.rotate(start + arc / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#000";
        ctx.font = "bold 18px Arial";

        ctx.fillText(items[i], radius - 25, 5);
        ctx.restore();
    }
}

function spin() {
    if (spinning) return;
    spinning = true;

    const duration = 3000;          // 3 giây
    const start = performance.now();
    const startAngle = angle;
    const extraRounds = 5;
    const randomOffset = Math.random() * 2 * Math.PI;

    function animate(now) {
        const elapsed = now - start;
        const progress = Math.min(elapsed / duration, 1);
        const easeOut = 1 - Math.pow(1 - progress, 3);

        angle =
            startAngle +
            easeOut * (extraRounds * 2 * Math.PI + randomOffset);

        drawWheel();

        if (progress < 1) {
            requestAnimationFrame(animate);
        } else {
            spinning = false;
            showResult();
        }
    }

    requestAnimationFrame(animate);
}

function showResult() {
    const arc = 2 * Math.PI / items.length;

    // mũi tên ở trên, chỉ xuống
    const normalizedAngle =
        (angle + Math.PI / 2) % (2 * Math.PI);

    const index =
        Math.floor((2 * Math.PI - normalizedAngle) / arc) % items.length;

    document.getElementById("result").innerText =
        "Kết quả: " + items[index];
}

drawWheel();
</script>

</body>
</html>









